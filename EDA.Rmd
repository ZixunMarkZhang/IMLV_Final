---
title: "EDA"
output: html_document
date: "2023-04-18"
---

```{r}
#data cleaning
bankfull <- read.csv("bank-additional-full.csv", sep=";")
#delete month and data of week as they are irrelevant. Eliminate duration as it has extremely high correlation with target
bankfull = subset(bankfull, select = -c(month,day_of_week,duration) )
#delete all rows with unknown values
bankfull<-subset(bankfull, (job!='unknown') & (marital!='unknown') & (education!='unknown')& (default!='unknown')& (housing!='unknown')&(loan!='unknown'))
#keep binary variables
bank = subset(bankfull,select = c(marital, default, housing, loan,contact))
#process numerical values
bank$age = scale(bankfull$age)
bank$campaign = scale(bankfull$campaign)
bank$pdays =scale(bankfull$pdays)
bank$previous =scale(bankfull$previous)
bank$emp.var.rate =scale(bankfull$emp.var.rate)
bank$cons.price.idx =scale(bankfull$cons.price.idx)
bank$cons.conf.idx =scale(bankfull$cons.conf.idx)
bank$euribor3m =scale(bankfull$euribor3m)
bank$nr.employed =scale(bankfull$nr.employed)
bank$y = (bankfull$y=='yes')
library(caret)

dummy <- dummyVars(" ~ .", subset(bankfull, select = c(education,job,poutcome)))
df <- data.frame(predict(dummy, newdata = subset(bankfull, select = c(education,job,poutcome)))) 
bank = cbind(df,bank)
set.seed(5293)
n <- nrow(df)
train <- sample(n, .8*n)
train_dat <-bank[train, ]
test_dat<- bank[-train,]
```